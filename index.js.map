{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/news-api/config.js","../src/js/news-api/news-service.js","../src/js/helpers/truncateText.js","../src/js/helpers/appendNewsMarkup.js","../../../../../../error.svg","../../../../../../success.svg","../src/js/index.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.js-search-form'),\n  container: document.querySelector('.js-cards-container'),\n  loadMoreBtn: document.querySelector('.js-load-more'),\n  loader: document.querySelector('.js-loader'),\n};","export const BASE_URL = 'https://newsapi.org/v2/';\nexport const API_KEY = '44f296a92d194f81b1d9cea595a5cfa3';\nexport const PER_PAGE = 6;  //–∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –≤ –∑–∞–ø–∏—Ç—ñ","import axios from 'axios';\n// const apiKey = import.meta.env.VITE_API_KEY;\nimport { BASE_URL, API_KEY, PER_PAGE } from './config.js';\n\nexport async function fetchNews(searchQuery, currentPage = 1) {\n  const options = new URLSearchParams({\n    q: searchQuery,\n    apiKey: API_KEY,\n    language: 'en',\n    pageSize: PER_PAGE,\n    page: currentPage,\n  });\n  const url = `${BASE_URL}/everything?${options}`;\n\n\n  const {\n      data: {articles, totalResults, status, message = ''},\n  } = await axios.get(url);\n\n  if (status !== 'ok') {\n    throw new Error(message);\n  }\n  if (articles.length === 0) {\n    throw new Error('No articles founf'); // –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ\n  }\n  return { articles, totalResults };\n    // console.log(data); // –ü—Ä–∏–π—à–ª–∏ –Ω–∞—à—ñ –∞—Ä—Ç—ñ–∫–ª–∏\n}\n\n//   if (articles.length === 0) {\n//     throw new Error('No articles found');\n//   }\n\n//   return { articles, totalResults };\n// }","export function truncate(text, symbolsLimit = 90) {\n  if (!text) {\n    return text;\n  }\n  return text.length <= symbolsLimit\n    ? text\n    : `${text.slice(0, symbolsLimit - 3)}...`; // –ê–±–æ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ç–µ–∫—Å—Ç, —è–∫—â–æ –≤—ñ–Ω –Ω–µ –±—ñ–ª—å—à–µ 90, –∞–±–æ –æ–±—Ä—ñ–∑–∞—î–º–æ –µ–≥–æ —ñ –¥–æ–¥–∞—î–º–æ ...\n}","// import { format } from 'date-fns';\nimport { truncate } from './truncateText.js';\n\nexport function appendNewsArticles(articles, wrapper) {\n    const articlesMarkup = articles\n        .map(\n            ({ title, description, url, urlToImage, publishedAt}) => `\n            <article class=\"card\">\n                <img\n                    class=\"card-img-top\"\n                    src=\"${urlToImage\n                            ? urlToImage\n                            :\n                            'https://placehold.co/600x400?text=Hot news'}\"\n                    alt=\"${title}\"\n                />\n            <div class=\"card-body\">\n                <h5 class=\"card-title\">${truncate(title, 30)}</h5>\n                <p class=\"card-text\">${truncate(description)}</p>\n                <p class=\"card-text\">\n                <small class=\"text-body-secondary\">${publishedAt}</small>\n                </p>\n                <a href=\"${url}\" class=\"btn btn-outline-primary\"\n                target=\"_blank\" rel=\"noopener noreferrer\">Read more</a>\n            </div>\n            </article>`).join('');\n    wrapper.insertAdjacentHTML('beforeend', articlesMarkup);\n}","export default \"__VITE_PUBLIC_ASSET__8591fb33__\"","export default \"__VITE_PUBLIC_ASSET__86f94cda__\"","/**\n * –û—Ç—Ä–∏–º—É—î–º–æ –∫–ª—é—á https://newsapi.org/\n * –ó–∞–ø–∏—Ç–∏ —Ä–æ–±–∏—Ç–∏–º–µ–º–æ –Ω–∞ http://newsapi.org/v2/everything?q=cat&language=en&pageSize=5&page=1\n *\n * –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è: –Ω–æ–º–µ—Ä –≥—Ä—É–ø–∏ —Ç–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –≥—Ä—É–ø–∏\n * - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Å—Ç–∞—Ç—Ç—ñ –ø—Ä–∏ —Å–∞–±–º—ñ—Ç—ñ —Ñ–æ—Ä–º–∏\n * - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Å—Ç–∞—Ç—Ç—ñ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —â–µ¬ª\n * - –û–Ω–æ–≤–ª—é—î–º–æ –≥—Ä—É–ø—É –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∑–∞–ø–∏—Ç—É\n * - –†–µ–Ω–¥–µ—Ä–∏–º —Å—Ç–∞—Ç—Ç—ñ\n * - –°–∫–∏–¥–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏ –ø–æ—à—É–∫—É –∑–∞ –Ω–æ–≤–∏–º –∫—Ä–∏—Ç–µ—Ä—ñ—î–º\n * - –ü–æ–∫–∞–∑—É—î–º–æ —Å–ø—ñ–Ω–Ω–µ—Ä –ø–æ–∫–∏ –π–¥–µ –∑–∞–ø–∏—Ç\n */\n\nimport { refs } from './refs.js';\nimport { fetchNews } from './news-api/news-service.js';\nimport { appendNewsArticles } from './helpers/appendNewsMarkup.js';\nimport { PER_PAGE } from './news-api/config.js';\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n// –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —ñ–∫–æ–Ω–∫—É\nimport errorIcon from '/error.svg';\nimport successIcon from '/success.svg';\n\nlet currentPage = 1;\nlet searchQuery = null;\nlet pages = 0;\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  searchQuery = form.elements.newsKeyword.value;\n  refs.container.innerHTML = '';\n  currentPage = 1;\n\n  try {\n    const { articles, totalResults } = await fetchNews(\n      searchQuery,\n      currentPage\n    );\n\n    if (currentPage === 1) {\n      iziToast.success({ message: 'First page üòé', iconUrl: successIcon });\n    }\n\n    pages = Math.ceil(totalResults / PER_PAGE);\n    appendNewsArticles(articles, refs.container);\n    refs.loadMoreBtn.classList.remove('is-hidden');\n  } catch (error) {\n    refs.loadMoreBtn.classList.add('is-hidden');\n    iziToast.error({\n      message: error.message,\n      iconUrl: errorIcon,\n    });\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  currentPage += 1;\n\n  try {\n    refs.loader.classList.remove('is-hidden');\n\n    const { articles } = await fetchNews(searchQuery, currentPage);\n    appendNewsArticles(articles, refs.container);\n    handleScrollView();\n\n    if (currentPage >= Math.min(pages, 16)) {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      iziToast.success('Last page ü•∫');\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.success('');\n  } finally {\n    refs.loader.classList.add('is-hidden');\n  }\n}\n\nfunction handleScrollView() {\n  const lastArticle = refs.container.lastElementChild;\n  const articleHeight = lastArticle.getBoundingClientRect().height;\n  console.log('handleScrollView  articleHeight:', articleHeight);\n  const scrollHeight = articleHeight * 2;\n  console.log('handleScrollView  scrollHeight:', scrollHeight);\n\n  window.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n}"],"names":["refs","BASE_URL","API_KEY","PER_PAGE","fetchNews","searchQuery","currentPage","options","url","articles","totalResults","status","message","axios","truncate","text","symbolsLimit","appendNewsArticles","wrapper","articlesMarkup","title","description","urlToImage","publishedAt","errorIcon","successIcon","pages","handleSubmit","handleLoadMore","event","form","iziToast","error","handleScrollView","articleHeight","scrollHeight"],"mappings":"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"}